<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Wolf-search-engine by Wawolf</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Wolf-search-engine</h1>
          <h2>Create your own search engine, easily and quickly!</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/Wawolf/Wolf-Search-Engine/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/Wawolf/Wolf-Search-Engine/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/Wawolf/Wolf-Search-Engine" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>
<a id="wolf-search-engine" class="anchor" href="#wolf-search-engine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Wolf-Search-Engine</h1>

<p><strong>Create your own custom search engine, easily and quickly!</strong></p>

<h2>
<a id="what-is-wse" class="anchor" href="#what-is-wse" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is WSE?</h2>

<p>WSE permits you to create customized search engines in a few lines.</p>

<ul>
<li>It can be used for all types of data you can search inside a database.</li>
<li>It is scalable made and object-oriented.</li>
<li>It is protected against <strong>SQL injections</strong>
</li>
</ul>

<h2>
<a id="how-does-wse-works" class="anchor" href="#how-does-wse-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>How does WSE works?</h2>

<p>WSE functions with a <strong>weighted rule</strong> system:</p>

<ul>
<li>You have to define the rules of your engine, the ones that will make the engine interested or not to an element</li>
<li>Each rule is associated with a weight/importance indice you define; the most important it is to match the rule, the heavier you define its weight.</li>
<li>All elements have a weight, which is nil if it does not match any rule</li>
<li>Each element that matches the rule sees the weight of this rule added to it</li>
<li>Finally, elements are sorted by descending weight; so, the return is an Array ordered by relevance.</li>
</ul>

<h2>
<a id="how-to-use-wse" class="anchor" href="#how-to-use-wse" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use WSE?</h2>

<p>You will need three simple steps before you can perform a search:</p>

<h3>
<a id="1-instantiate" class="anchor" href="#1-instantiate" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Instantiate</h3>

<p>First, create an instance of WSE using a PDO object:</p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-smi">$db</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">PDO</span>(<span class="pl-s"><span class="pl-pds">'</span>mysql:host=localhost;dbname=db<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>user<span class="pl-pds">'</span></span>,<span class="pl-s"><span class="pl-pds">'</span>password<span class="pl-pds">'</span></span>);</span>
<span class="pl-s1"><span class="pl-smi">$engine</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-c1">WSE</span>(<span class="pl-smi">$db</span>);</span></pre></div>

<h3>
<a id="2-set-rules" class="anchor" href="#2-set-rules" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Set rules</h3>

<p>Set the rules of your engine and the impact its gonna have on the search (weight).
At list one rule must be added to the engine.
Several methods exists that allow you adding a rule:</p>

<h4>
<a id="21-the-addcustom-method" class="anchor" href="#21-the-addcustom-method" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.1. The addCustom Method</h4>

<p>The basic way of setting a rule is to use <code>WSE::addCustom($query, $table, $weight=1)</code> method.</p>

<p><em>Exemple: assuming the current word is "captain132":</em></p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addCustom(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-s1"><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> <span class="pl-s"><span class="pl-pds">`</span>:table<span class="pl-pds">`</span></span> <span class="pl-k">WHERE</span> <span class="pl-s"><span class="pl-pds">`</span>nick<span class="pl-pds">`</span></span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>:rowval<span class="pl-pds">"</span></span></span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>users<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</span>
<span class="pl-s1"><span class="pl-c">//Will perform</span></span>
<span class="pl-s1"><span class="pl-smi">$db</span><span class="pl-k">-&gt;</span>query(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-s1"><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> <span class="pl-s"><span class="pl-pds">`</span>users<span class="pl-pds">`</span></span> <span class="pl-k">WHERE</span> <span class="pl-s"><span class="pl-pds">`</span>nick<span class="pl-pds">`</span></span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>captain132<span class="pl-pds">"</span></span></span><span class="pl-pds">'</span></span>);</span></pre></div>

<p>Note that addCustom will <strong>always and strictly</strong> replace <em>:table</em> by <code>$table</code>'s value, and <em>:rowval</em> by the current word's value; no quotes are added.</p>

<h4>
<a id="22-the-addequals-method" class="anchor" href="#22-the-addequals-method" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.2. The addEquals Method</h4>

<p>The addEquals method (<code>WSE::addEquals($row, $table, $weight=1)</code>) will consider a match only if the current word's value is exactly the same as the <code>$row</code> value into <code>$table</code>.</p>

<p><em>Exemple: assuming the current word is "house":</em></p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addEquals(<span class="pl-s"><span class="pl-pds">'</span>type<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>housing<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</span>
<span class="pl-s1"><span class="pl-c">//Is the same as</span></span>
<span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addCustom(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-s1"><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> <span class="pl-s"><span class="pl-pds">`</span>:table<span class="pl-pds">`</span></span> <span class="pl-k">WHERE</span> <span class="pl-s"><span class="pl-pds">`</span>type<span class="pl-pds">`</span></span><span class="pl-k">=</span><span class="pl-s"><span class="pl-pds">"</span>:rowval<span class="pl-pds">"</span></span></span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>housing<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</span></pre></div>

<h4>
<a id="23-the-addlikes-method" class="anchor" href="#23-the-addlikes-method" aria-hidden="true"><span class="octicon octicon-link"></span></a>2.3. The addLikes Method</h4>

<p>The addLikes method (<code>WSE::addLikes($row, $table, $weight=1, $notequal=true)</code>) will consider a match if the current word's value is contained inside the <code>$row</code> value into <code>$table</code>.
Note that if <code>$notequal</code> is set to true (default), addLike will ignore the case where the current word's value is exactly the same as <code>$row</code>, which is recommended unless the engine has no <em>addEquals</em> like rules.</p>

<p><em>Exemple: assuming the current word is "pi":</em></p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addLikes(<span class="pl-s"><span class="pl-pds">'</span>word<span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>dictionnary<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</span>
<span class="pl-s1"><span class="pl-c">//Is the same as</span></span>
<span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addCustom(<span class="pl-s"><span class="pl-pds">'</span><span class="pl-s1"><span class="pl-k">SELECT</span> <span class="pl-k">*</span> <span class="pl-k">FROM</span> <span class="pl-s"><span class="pl-pds">`</span>:table<span class="pl-pds">`</span></span> <span class="pl-k">WHERE</span> <span class="pl-s"><span class="pl-pds">`</span>word<span class="pl-pds">`</span></span> <span class="pl-k">LIKE</span> %<span class="pl-s"><span class="pl-pds">"</span>:rowval<span class="pl-pds">"</span></span>%</span><span class="pl-pds">'</span></span>, <span class="pl-s"><span class="pl-pds">'</span>dictionary<span class="pl-pds">'</span></span>, <span class="pl-c1">10</span>);</span>
<span class="pl-s1"><span class="pl-c">//And it works for "pirate","apiarist",etc..., but not for "pi"</span></span></pre></div>

<h3>
<a id="3-filter" class="anchor" href="#3-filter" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Filter</h3>

<p>It is possible to add filters to the search engine.
These filters act to the input string of the search function before any database interaction.</p>

<h4>
<a id="31-using-filters" class="anchor" href="#31-using-filters" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.1. Using Filters</h4>

<p>You can add a filter using <code>WSE::addLikes($filter)</code> method.
In the version 1.0.0, WSE only provides you one filter: <strong>the whitespace filter</strong>
You'll find this filter as <code>$engine-&gt;filter_whitespaces</code>.</p>

<h4>
<a id="32-adding-custom-filters" class="anchor" href="#32-adding-custom-filters" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.2. Adding Custom Filters</h4>

<p>You can add a custom filter sending to <code>WSE::addFilter($filter)</code> a function that take as first argument the input string and as second argument the separator that will be used for cutting the filtered query string into words.
It has to return the filtered string.</p>

<p><em>Exemple: here, we are adding a filter that replace all "a" chars by the separator</em></p>

<div class="highlight highlight-php"><pre><span class="pl-s1"><span class="pl-smi">$engine</span><span class="pl-k">-&gt;</span>addFilter(<span class="pl-k">function</span>(<span class="pl-smi">$input</span>, <span class="pl-smi">$separator</span>){</span>
<span class="pl-s1">    <span class="pl-k">return</span> <span class="pl-c1">str_replace</span>(<span class="pl-s"><span class="pl-pds">'</span>a<span class="pl-pds">'</span></span>, <span class="pl-smi">$separator</span>, <span class="pl-smi">$input</span>);</span>
<span class="pl-s1">});</span></pre></div>

<h3>
<a id="search" class="anchor" href="#search" aria-hidden="true"><span class="octicon octicon-link"></span></a>Search</h3>

<p>Now your engine is set, you can search whatever you want.
To search, use the method <code>WSE::search($str, $separator)</code>, with <code>$str</code> the query string and <code>$separator</code> the chars that are gonna be used for cutting the query into words.
This method can be called several times, it won't change the rules or the filters.</p>

<p><em>Notes:</em></p>

<ul>
<li>
<code>WSE::search($str, $separator)</code> return a multidimensional array ordered by pertinence which contains table lines arrays; The name of the table it comes from is stored at the index <code>_wse_table_</code>.</li>
<li>You can access the execution time using the method <code>double WSE::getLastExecutionTime()</code> (time in seconds)</li>
</ul>
        </section>

        <footer>
          Wolf-search-engine is maintained by <a href="https://github.com/Wawolf">Wawolf</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
